---
title: '**Dispersion Optimization in Practice**'
author: "Trevor Kapuvari, Nohman Akhtari"
date: "03/20/2024"
output:
  html_document:
    keep_md: yes
    toc: yes
    theme: lumen
    toc_float: yes
    code_folding: hide
    number_sections: no
    css: style.css
  pdf_document:
    toc: yes
---
```{r setup, results = 'hide', message = FALSE, warning = FALSE, error = FALSE}
library(tidyverse)
library(tidycensus)
library(sf)
library(knitr)
library(viridis)
library(bookdown)
library(MASS)
library(rmarkdown)
options(scipen = 999)
knitr::opts_chunk$set(echo = TRUE)
theme_update(plot.title = element_text(hjust = 0.5))
```




# Introduction (reword)
The p-dispersion problem is a technique to maximize the distance between the two closest pair of points in a network. The function of this optimization technique is to disseminate a value, or object, as far as possible from others of the same type. 

In this practice study, we leverage the p-dispersion problem to a political analysis regarding homeowner eligibility for registered sex-offenders. Our objective is to locate available homes within a municipality that both enables the social rehabilitation process while mitigating recidivism risk. For our scenario, a city council agreed to consider rental properties as potential locations for registered sex-offenders seeking residency. We are examining potential locations for these individuals to reside, while considering the distance between each location to the nearest school, park, and other sex-offender occupied rentals. 

# Methodology 
The p-dispersion maximization problem that maximizes the distance between chosen points is depicted below.


$$
\text{max } Z\\
\text{s.t. } Z - m (2-X_i-X_j) \leq d_{ij}\\
\sum_{i} X_i = p \\ 
X_id'_{ik} \leq b\\
X_i \in \{0,1\}\\
Z \geq 0
$$
$Z$ is the minimum distance between two points,$d_{ij}$ is the distance between locations $i$ and $j,$ $p$ is the number of points to be sited, and $m$ is a number that is used to establish what is called an upper effective bound on $Z$. Note that if points at both site $i$ and $j$ are chosen, we are left with $Z \leq d_{ij}$ implying that we must chose $d_{ij}$ as distance. The upper bound on $Z$ only comes into action if none or either locations are chosen, giving us $Z \leq d_{ij}+2m$ or $Z \leq d_{ij}+m,$ respectively.

Note that for each placed point, the constraints also include a minimum distance $b$ that the sited point must be away from. The index $k$ is the location index for points for which we want to build up the distance.

Further, it has to be clarified that the notion of distance has to be thought of in an abstract way in the sense that it could be pure walking distance, but also aerial distance or time to get to a specified location. The choice of the distance variable is eventually up to the person who builds the model, but should be adjusted specifically to each use case to make the results more robust.

# System Evaluation

When examining the graph below

Where would the residence of sex offenders be if
the city was to accept 2, 4, 6 and 8 offenders
(changing the p-value)?

How does the objective function value changes
with a different value for p (graph it)?

Report on the running time as well â€“ IT CAN TAKE
A LONG TIME!

```{r Graph 1}
knitr::include_graphics("https://raw.githubusercontent.com/TrevorKap/Classes_MUSA/main/SpatialOptimization/images/Homework5Graph1.png")

```


# Results
Trevor

```{r Map 1}
knitr::include_graphics("https://raw.githubusercontent.com/TrevorKap/Classes_MUSA/main/SpatialOptimization/Homework5Map1.png")

```



```{r Map 2}
knitr::include_graphics("https://raw.githubusercontent.com/TrevorKap/Classes_MUSA/main/SpatialOptimization/Homework5Map2.png")

```


# Conclusion
First, we have to note that the ideal locations of offenders might satisfy all of our constraints in the maximization problem, but do not necessarily represent a feasible solution because they ignore the current socioeconomic ecosystem of the ideal locations.. The idea behind this thought is that offenders could, for example, be situated into areas with high crime and therefore be stimulated to recidivate. (to be continued)

